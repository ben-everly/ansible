- hosts: workstation
  vars:
    docker_compose_version: v2.15.1
  environment:
    PATH: "{{ ansible_env.HOME }}/.asdf/bin:{{ ansible_env.HOME }}/.asdf/shims:{{ ansible_env.PATH }}"
  roles:
    - role: geerlingguy.docker
      become: true
    - role: enpass
      become: true
    - role: slack
      become: true
      when: "'work' in ansible_hostname"
    - role: zoom
      when: "'work' in ansible_hostname"
      become: true
    - role: python3
      become: true
    - role: cimon-io.asdf
      asdf_user: "{{ ansible_user_id }}"
      asdf_group: "{{ ansible_user_id }}"
      asdf_apt_optional_dependencies:
        # php 8.2.2
        - libsqlite3-dev
        - libgd-dev
        - libonig-dev
        - libpq-dev
        - libzip-dev
      asdf_plugins:
        - name: golang
          repository: https://github.com/kennyp/asdf-golang.git
          versions: [ "1.20" ]
          global: "1.20"
        - name: nodejs
          versions: [ "19.6.0" ]
          global: "19.6.0"
        - name: php
          versions: [ "8.2.2" ]
          global: "8.2.2"
        - name: java
          repository: https://github.com/halcyon/asdf-java.git
          versions: [ "openjdk-19.0.2" ]
          global: "openjdk-19.0.2"
        - name: ruby
          versions: [ "3.2.0" ]
          global: "3.2.0"
        - name: python
          versions: [ "2.7.18" ]
          global: "2.7.18"
    - role: neovim
    - role: spotify
      become: true
    - role: dropbox
      become: true
    - role: gh-cli
      become: true
    - role: jet
    - role: typescript
    - role: pop-shell
    - role: cli-dev-tools
    - role: vim-anywhere
    - role: chrome
      become: true
    - role: rcm
    - role: tomb
      become: true
    - role: pass
      become: true
    - role: vagrant
      become: true
      when: "'work' not in ansible_hostname"
    - role: dbxcli
    - role: aws
  tasks:
    - name: apt autoremove
      become: true
      apt:
        autoremove: true
