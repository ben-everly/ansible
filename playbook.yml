- hosts: workstation
  vars:
    docker_compose_version: v2.15.1
    apt_packages:
      #- automake
      #- gnome-tweaks
      #- libnss3-tools
      #- libc6-x32
      #- libc6-i386
      #- pkg-config
  environment:
    PATH: "{{ ansible_env.HOME }}/.asdf/bin:{{ ansible_env.HOME }}/.asdf/shims:{{ ansible_env.PATH }}"
  roles:
    - role: geerlingguy.docker
      become: true
    - role: enpass
      become: true
    - role: oberd
      become: true
    - role: cli-dev-tools
      become: true
    - role: python3
      become: true
    - role: cimon-io.asdf
      asdf_user: ben
      asdf_group: ben
      asdf_apt_optional_dependencies:
       - libsqlite3-dev
       - libgd-dev
       - libonig-dev
       - libpq-dev
       - libzip-dev
      asdf_plugins:
      - name: golang
        repository: https://github.com/kennyp/asdf-golang.git
        versions: [ "latest" ]
        global: "latest"
      - name: nodejs
        versions: [ "latest" ]
        global: "latest"
      - name: php
        versions: [ "latest" ]
        global: "latest"
      - name: java
        repository: https://github.com/halcyon/asdf-java.git
        versions: [ "latest:openjdk" ]
        global: "latest"
      - name: ruby
        versions: [ "latest" ]
        global: "latest"
      - name: python
        versions: [ "2.7.18" ]
        global: "2.7.18"
    - role: neovim
    - role: spotify
      become: true
    - role: dropbox
      become: true
    - role: gh-cli
      become: true
    - role: dbxcli
    - role: aws
    - role: jet
    - role: typescript
    - role: pop-shell
    - role: vim-anywhere
    - role: chrome
      become: true
    - role: rcm
    - role: tomb
      become: true
    - role: pass
      become: true
    - role: vagrant
      become: true
  tasks:
      - name: apt autoremove
        become: true
        apt:
          autoremove: true

      # - name: install javaSE
      #   block:
      #     - name: download javaSE
      #       get_url:
      #         url: https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.deb
      #         dest: ./tmp/javaSE.deb
      #       register: javaSE_file

      #     - name: install javaSE
      #       become: yes
      #       when: javaSE_file.changed
      #       apt: deb="./tmp/javaSE.deb"
